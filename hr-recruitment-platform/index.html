<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>NovumFlow HR Platform</title>
</head>

<body>
  <div id="root"></div>
  <script>
    // Clear stale service workers on load
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.getRegistrations().then(function(registrations) {
        for (let registration of registrations) {
          registration.update();
        }
      });
    }
    // Clear caches if version mismatch detected
    const APP_VERSION = 'v1.0.1';
    const storedVersion = localStorage.getItem('app_version');
    if (storedVersion !== APP_VERSION) {
      if ('caches' in window) {
        caches.keys().then(function(names) {
          for (let name of names) {
            caches.delete(name);
          }
        });
      }
      localStorage.setItem('app_version', APP_VERSION);
      if (storedVersion) {
        window.location.reload(true);
      }
    }
  </script>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>